var PngValidator=function(r){"use strict";var e,n,t=1229472850,o={0:1,2:3,3:1,4:2,6:4},i=!1,f=!1,h=!1,d=[],a=0,u={};function w(r){var t=e+r;if(t>n.length)throw new Error("Unexpectedly reached end of file. Index: "+e);var o=n.slice(e,t);return e=t,o}function c(r,e){var n=l(r,e);return 2147483648&n?-4294967296^n:n}function l(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}u[t]=function(r){var n=r[8],t=r[9],f=r[10],h=r[11],d=r[12];if(8!==n&&4!==n&&2!==n&&1!==n&&16!==n)throw new Error("Unsupported bit depth "+n+". Index: "+e);if(!(t in o))throw new Error("Unsupported color type. Index: "+e);if(0!==f)throw new Error("Unsupported compression method. Index: "+e);if(0!==h)throw new Error("Unsupported filter method. Index: "+e);if(0!==d&&1!==d)throw new Error("Unsupported interlace method. Index: "+e);a=t,i=!0},u[1229278788]=function(){h=!0},u[1229209940]=function(r){if(3===a&&0===d.length)throw new Error("Expected palette not found. Index: "+e);f=!0},u[1347179589]=function(r){for(var e=Math.floor(r.byteLength/3),n=0;n<e;n++)d.push([r[3*n],r[3*n+1],r[3*n+2],255])},u[1951551059]=function(r){if(3===a){if(0===d.length)throw new Error("Transparency chunk must be after palette. Index: "+e);if(r.byteLength>d.length)throw new Error("More transparent colors than palette size. Index: "+e);for(var n=0;n<r.byteLength;n++)d[n][3]=r[n]}},u[1732332865]=function(){};var g=[];function p(r){for(var e=-1,n=0;n<r.length;n++)e=g[255&(e^r[n])]^e>>>8;return-1^e}return function(){for(var r=0;r<256;r++){for(var e=r,n=0;n<8;n++)1&e?e=3988292384^e>>>1:e>>>=1;g[r]=e}}(),r.pngValidator=function(r){for(i=!1,f=!1,h=!1,d=[],a=0,e=0,n=r,function(){for(var r=[137,80,78,71,13,10,26,10],n=w(r.length),t=0;t<r.length;t++)if(n[t]!==r[t])throw new Error("Invalid file signature. Index: "+e)}();e<n.byteLength;){var o=l(n,e);if(e+=4,o>n.byteLength-e)throw new Error("Invalid chunk length. Index: "+e);var g=n.slice(e,e+4+o),s=l(n,e);e+=4;for(var I="",v=4;v>0;v--)I+=String.fromCharCode(n[e-v]);var x=Boolean(32&g[0]);if(!i&&s!==t)throw new Error("Expected IHDR on beggining. Index: "+e);var E=w(o),y=u[s];if(null==y){if(!x)throw new Error("Unsupported critical chunk type "+I+". Index: "+e);e+=4}else{y(E);var b=c(n,e);e+=4;var U=p(g);if(U!==b)throw new Error("Crc error - "+b+" - "+U+". Index: "+e)}}if(!i)throw new Error("Parsing ended without finding the IHDR chunk. Index: "+e);if(!f)throw new Error("Parsing ended without finding any IDAT chunk. Index: "+e);if(!h)throw new Error("Parsing ended without finding the IEND chunk. Index: "+e);if(r.byteLength>e)throw new Error("There are bytes left at the end of the file. Index: "+e)},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
